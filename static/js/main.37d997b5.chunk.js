(this["webpackJsonpelevation-profile"]=this["webpackJsonpelevation-profile"]||[]).push([[0],{66:function(t,e,n){t.exports=n(98)},75:function(t,e,n){},97:function(t,e,n){},98:function(t,e,n){"use strict";n.r(e);var a=n(0),r=n.n(a),i=n(33),o=n.n(i),c=n(22),l=n(12),u=n(51),s=(n(75),n(23)),p=n(52),f=n.n(p),d=n(24),h=n(14),m=n(29),v=n.n(m),g=n(37),b=n(5),E=n(53),O=n.n(E),j=function(t){return t.map((function(t){var e=Object(b.a)(t,2),n=e[0],a=n;return n>180&&(a-=360),n<-180&&(a+=360),[a,e[1]]}))},w=function(){var t=Object(g.a)(v.a.mark((function t(e){var n,a,r,i,o;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Math.min(100*(e.length-1),500),a=j(e),r=Object({NODE_ENV:"production",PUBLIC_URL:"/elevation-profile",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_GOOGLE_MAPS_ELEV_API_KEY,i=a.reduce((function(t,e,n){var r=Object(b.a)(e,2),i=r[0],o=r[1],c="".concat(t).concat(o,",").concat(i);return n!==a.length-1&&(c+="|"),c}),""),o={samples:n,path:i,key:r},"https://cors-anywhere.herokuapp.com/https://maps.googleapis.com/maps/api/elevation/json",t.abrupt("return",{url:"https://cors-anywhere.herokuapp.com/https://maps.googleapis.com/maps/api/elevation/json",params:o});case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),y=function(t){return t.results.map((function(t,e){return{index:e,elevation:t.elevation,lat:t.location.lat,lng:t.location.lng}}))},P=function(t){var e=t.submitting;return function(t){t({submitting:e,type:"SET_SUBMITTING"})}},_=function(t){return function(e){return e({type:"PUSH_PIN",pin:t})}};function x(){var t=Object(s.a)(["\n  flex: 1 1 auto;\n  background-color: #eeeeee;\n  color: teal;\n  &:hover {\n    background-color: #dddddd;\n    color: #004040;\n  }\n"]);return x=function(){return t},t}function k(){var t=Object(s.a)(["\n  flex: 2 1 250px;\n  border: none;\n  background: teal;\n  color: white;\n  font-size: 1rem;\n  border-radius: 0.5rem;\n  padding: 1rem;\n  margin: 0.5rem;\n  -webkit-box-shadow: 0px 5px 5px 1px rgba(34, 34, 34, 0.5);\n  -moz-box-shadow: 0px 5px 5px 1px rgba(34, 34, 34, 0.5);\n  box-shadow: 0px 5px 5px 1px rgba(34, 34, 34, 0.5);\n  cursor: pointer;\n  &:hover {\n    background-color: #006464;\n  }\n"]);return k=function(){return t},t}function S(){var t=Object(s.a)(["\n  display: flex;\n  position: fixed;\n  flex-wrap: wrap;\n  z-index: 5;\n  margin: 0 2rem;\n"]);return S=function(){return t},t}var T=d.a.div(S()),D=d.a.button(k()),A=Object(d.a)(D)(x()),C=function(t){var e=t.getElevationData,n=t.submitting,a=t.numPins,i=n||a<2,o=r.a.createElement(r.a.Fragment,null,r.a.createElement("strong",null,"Get my elevation profile!"),r.a.createElement("br",null),"Or click to add more points");return 0===a&&(o="Click anywhere to drop an endpoint"),1===a&&(o="Click anywhere to drop another endpoint"),r.a.createElement(D,{disabled:i,onClick:e,id:"get-elevation-profile-button"},n?r.a.createElement(f.a,null):o)},H=function(t){var e=t.disabled,n=t.clearPins;return r.a.createElement(A,{onClick:n,disabled:e,id:"clear-button"},"Clear pins")},I=Object(l.b)((function(t){return{submitting:t.chart.submitting,numPins:t.map.pins.length}}),(function(t){return{getElevationData:function(){return t(function(){var t=Object(g.a)(v.a.mark((function t(e,n){var a,r,i,o,c,l;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=n(),r=a.map,i=r.pins,e(P({submitting:!0})),t.next=5,w(i);case 5:return o=t.sent,c=o.url,l=o.params,t.next=10,O.a.get(c,{params:l}).then((function(t){var n=t.data,a=y(n);e({type:"SET_ELEVATION_DATA",elevationData:Object(h.a)(a)}),e({type:"SET_MAP_HEIGHT",mapHeight:"75vh"})})).catch((function(t){console.error(t)})).finally((function(){return e(P({submitting:!1}))}));case 10:return t.abrupt("return",t.sent);case 11:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}())},clearPins:function(){return t((function(t){t({type:"CLEAR_PINS"}),t({type:"SET_ELEVATION_DATA",elevationData:[]}),t({type:"SET_MAP_HEIGHT",mapHeight:"100vh"})}))}}}))((function(t){var e=t.getElevationData,n=t.clearPins,a=t.numPins,i=t.submitting,o=a>0;return r.a.createElement(T,null,r.a.createElement(C,{getElevationData:e,submitting:i,numPins:a}),o&&r.a.createElement(H,{clearPins:n,disabled:!o||i}))})),N=n(104),L=n(106),M=n(60),W=n(109),U=n(16),R=n(102),G=n(103),B=n(111),K=n(107),z=n(112),V=n(57),J=n.n(V),Y=function(t){var e=t.chartProps,n=t.elevationData,i=e.width,o=e.height,c=e.margin,l=Object(a.useRef)();return Object(a.useEffect)((function(){Object(R.a)("svg > *").remove();var t=Object(G.a)(l.current),e=Object(N.a)(n,(function(t){return t.elevation})),a=Object(W.a)((function(t){return Object(z.a)(1-t)})).domain(e),r=Object(U.a)().domain([0,n.length]).range([c.left,i-c.right]),u=Object(U.a)().domain(e).nice().range([o-c.bottom,c.top]),s=Object(B.a)().curve(K.a).defined((function(t){return!Number.isNaN(t.elevation)})).x((function(t){return r(t.index)})).y((function(t){return u(t.elevation)}));(u(0)<u(e[0])||u(0)>u(e[1]))&&t.append("line").attr("id","waterline").style("stroke","lightblue").style("stroke-opacity",.5).style("fill","#").style("stroke-width",2).style("stroke-dasharray","10 5 10").attr("x1",c.left).attr("y1",u(0)).attr("x2",i-c.right).attr("y2",u(0)),t.append("g").call((function(t){return t.attr("transform","translate(0,".concat(o-c.bottom,")")).call((function(t){return t.select(".domain").remove()}))})),t.append("g").call((function(t){return t.attr("transform","translate(".concat(c.left,",0)")).call(Object(M.a)(u)).call((function(t){return t.select(".domain").remove()})).call((function(t){return t.select(".tick:last-of-type text").append("tspan").text(" meters")}))})),t.append("defs").append("linearGradient").attr("id","mainGradient").attr("id","gradient").attr("gradientUnits","userSpaceOnUse").attr("x1",c.left).attr("y1",c.top).attr("x2",i-c.right).attr("y2",o-c.bottom).selectAll("stop").data(Object(L.a)(0,1,10)).join("stop").attr("offset",(function(t){return t})).attr("stop-color",a.interpolator()),t.append("path").datum(n).attr("fill","transparent").attr("stroke","url(#gradient)").attr("stroke-width",3).attr("stroke-linejoin","round").attr("stroke-linecap","round").attr("d",s)}),[n]),r.a.createElement(J.a,{animate:!0,duration:500},r.a.createElement("svg",{ref:l,viewBox:"0, 0, ".concat(i,", ").concat(o)}))},$=Object(l.b)((function(t){return{elevationData:t.chart.elevationData,chartProps:t.chart.chartProps}}),null)((function(t){var e=t.chartProps,n=t.elevationData;return r.a.createElement(Y,{chartProps:e,elevationData:n})})),F=n(1),X=n(9),q=n(19),Q=n(59),Z=n.n(Q),tt=function(t){var e=t.size,n=t.fill,a=void 0===n?"#D00":n,i=t.stroke,o={fill:a,stroke:void 0===i?"none":i};return r.a.createElement("svg",{height:e,viewBox:"0 0 24 24",style:o},r.a.createElement("path",{d:"M20.2,15.7L20.2,15.7c1.1-1.6,1.8-3.6,1.8-5.7c0-5.6-4.5-10-10-10S2,4.5,2,10c0,2,0.6,3.9,1.6,5.4c0,0.1,0.1,0.2,0.2,0.3\n  c0,0,0.1,0.1,0.1,0.2c0.2,0.3,0.4,0.6,0.7,0.9c2.6,3.1,7.4,7.6,7.4,7.6s4.8-4.5,7.4-7.5c0.2-0.3,0.5-0.6,0.7-0.9\n  C20.1,15.8,20.2,15.8,20.2,15.7z"}))},et={offsetTop:-20,offsetLeft:-10,draggable:!0},nt=function(t){var e=t.pins,n=t.onMarkerDragEnd;return e.map((function(t,e){var a=Object(b.a)(t,2),i=a[0],o=a[1];return r.a.createElement(q.b,Object.assign({longitude:i,latitude:o,key:"".concat(i,",").concat(o),title:"".concat(i,",").concat(o),onDragEnd:function(t){return n(t,e)}},et),r.a.createElement(tt,{size:20,fill:"#D00000CC"}))}))};n(96);function at(){var t=Object(s.a)(["\n  transition: all 1.5s ease-in-out;\n  /* transition: transform 300ms ease-in-out; */\n"]);return at=function(){return t},t}var rt=Object({NODE_ENV:"production",PUBLIC_URL:"/elevation-profile",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_MAPBOX_API_KEY,it=d.a.div(at()),ot=function(){var t=[];return Object(L.a)(0,1,10).forEach((function(e){var n;t.push(e),t.push((n=e,Object(W.a)((function(t){return Object(z.a)(1-t)})).domain([0,.5,1])(n)))})),{"line-color":"#ff0000","line-width":2,"line-gradient":["interpolate",["linear"],["line-progress"]].concat(t)}},ct=Object(l.b)((function(t){return{submitting:t.chart.submitting,pins:t.map.pins}}),(function(t){return{actions:{pushPin:function(e){return t(_(e))},setPins:function(e){return t(function(t){return function(e){return e({type:"SET_PINS",pins:t})}}(e))}}}}))((function(t){var e=t.mapHeight,n=t.pins,i=t.actions,o=n.length>0,c=i.pushPin,l=i.setPins,u=Object(a.useState)({height:"100vh",width:"100vw",position:"absolute",longitude:-119,latitude:36,zoom:5}),s=Object(b.a)(u,2),p=s[0],f=s[1],d=Object(a.useMemo)((function(){return ot()}),[]);Object(a.useEffect)((function(){f((function(t){return Object(X.a)({},t,{height:e})}))}),[e,n]);var m={type:"LineString",coordinates:Object(h.a)(n)};return r.a.createElement(it,null,r.a.createElement(q.e,Object.assign({mapboxApiAccessToken:rt,mapStyle:"mapbox://styles/pgres54268/cjuiu9aay60dx1fp784rt3x7r",onViewportChange:function(t){p.longitude,t.longitude,f(Object(X.a)({},t,{width:"100vw"}))},onClick:function(t){return function(t){t.preventDefault(),c(t.lngLat)}(t)}},p),o&&r.a.createElement("div",{id:"pin-markers"},r.a.createElement(nt,{pins:n,onMarkerDragEnd:function(t,e){t.preventDefault();var a=Z()(n,Object(F.a)({},e,{$set:Object(h.a)(t.lngLat)}));l(a)}}),r.a.createElement(q.d,{id:"my-lines",type:"geojson",data:m,lineMetrics:!0},r.a.createElement(q.a,{id:"lines",type:"line",paint:Object(X.a)({},d)}))),r.a.createElement("div",{style:{position:"absolute",right:0}},r.a.createElement(q.c,null))))})),lt=(n(97),Object(l.b)((function(t){return{elevationData:t.chart.elevationData,chartHeight:t.chart.chartProps.height,chartMargin:t.chart.chartProps.margin}}),null)((function(t){var e=t.elevationData,n=t.chartHeight,a=t.chartMargin,i=e.length>0,o=a.top+a.bottom,c=i?"calc(100vh - ".concat(n,"px - ").concat(o,"px)"):"100vh";return r.a.createElement("div",{className:"App"},r.a.createElement(I,null),r.a.createElement(ct,{mapHeight:c}),i&&r.a.createElement($,null))}))),ut={submitting:!1,elevationData:[],chartProps:{width:window.innerWidth-50,height:"200",margin:{top:20,right:100,bottom:20,left:100}}},st=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ut,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SET_SUBMITTING":return Object(X.a)({},t,{submitting:e.submitting});case"SET_ELEVATION_DATA":return Object(X.a)({},t,{elevationData:Object(h.a)(e.elevationData)});default:return t}},pt={mapProps:{mapHeight:"100vh"},pins:[]},ft=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pt,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"PUSH_PIN":var n=[].concat(Object(h.a)(t.pins),[e.pin]);return Object(X.a)({},t,{pins:n});case"SET_PINS":return Object(X.a)({},t,{pins:Object(h.a)(e.pins)});case"CLEAR_PINS":return Object(X.a)({},pt,{pins:[]});case"SET_MAP_HEIGHT":return Object(X.a)({},t,{mapProps:Object(X.a)({},t.mapProps,{mapHeight:e.mapHeight})});default:return t}},dt=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ht(t,e){navigator.serviceWorker.register(t).then((function(t){t.onupdatefound=function(){var n=t.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),e&&e.onUpdate&&e.onUpdate(t)):(console.log("Content is cached for offline use."),e&&e.onSuccess&&e.onSuccess(t)))})}})).catch((function(t){console.error("Error during service worker registration:",t)}))}var mt=[u.a],vt=Object(c.c)({chart:st,map:ft}),gt=Object(c.d)(vt,c.a.apply(void 0,mt));o.a.render(r.a.createElement(l.a,{store:gt},r.a.createElement(lt,null)),document.getElementById("root")),function(t){if("serviceWorker"in navigator){if(new URL("/elevation-profile",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("/elevation-profile","/service-worker.js");dt?(!function(t,e){fetch(t,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(t){t.unregister().then((function(){window.location.reload()}))})):ht(t,e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e,t),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):ht(e,t)}))}}()}},[[66,1,2]]]);
//# sourceMappingURL=main.37d997b5.chunk.js.map