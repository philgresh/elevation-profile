{"ast":null,"code":"var _jsxFileName = \"/Users/phil/Documents/elevation-profile/src/Chart/chartSVGGenerator.js\";\n\n/* eslint-disable no-shadow */\n\n/* eslint-disable react/prop-types */\nimport React, { useEffect, useRef } from 'react'; // import * as d3 from 'd3';\n\nimport { extent, ticks } from 'd3-array';\nimport { axisLeft } from 'd3-axis';\nimport { scaleDiverging, scaleLinear } from 'd3-scale';\nimport { select, selectAll } from 'd3-selection';\nimport { line as d3line, curveNatural } from 'd3-shape';\nimport { interpolateRdYlBu } from 'd3-scale-chromatic';\nimport SvgLines from 'react-mt-svg-lines';\n\nconst ChartSVG = ({\n  chartProps,\n  elevationData\n}) => {\n  const {\n    width,\n    height,\n    margin\n  } = chartProps;\n  const mainRef = useRef();\n  useEffect(() => {\n    selectAll('svg > *').remove();\n    const mainSVG = select(mainRef.current);\n    const elevExtent = extent(elevationData, point => point.elevation);\n    const color = scaleDiverging(t => interpolateRdYlBu(1 - t)).domain(elevExtent);\n    const x = scaleLinear().domain([0, elevationData.length]).range([margin.left, width - margin.right]);\n    const y = scaleLinear().domain(elevExtent).nice().range([height - margin.bottom, margin.top]);\n\n    const xAxis = g => g.attr('transform', `translate(0,${height - margin.bottom})`).call(g => g.select('.domain').remove());\n\n    const yAxis = g => g.attr('transform', `translate(${margin.left},0)`).call(axisLeft(y)).call(g => g.select('.domain').remove()).call(g => g.select('.tick:last-of-type text').append('tspan').text(' meters')); // const scaleIndex = scaleLinear()\n    //   .domain([0, elevationData.length])\n    //   .range([10, width - 10]);\n    // const scaleElev = scaleLinear()\n    //   .domain([maxElev, minElev])\n    //   .range([10, height]);\n\n\n    const elevCurve = d3line().curve(curveNatural).defined(d => !Number.isNaN(d.elevation)).x(d => x(d.index)).y(d => y(d.elevation)); // console.log({\n    //   zero: y(0),\n    //   elev0: y(elevExtent[0]),\n    //   elev1: y(elevExtent[1]),\n    // });\n\n    if (y(0) < y(elevExtent[0]) || y(0) > y(elevExtent[1])) {\n      mainSVG.append('line').attr('id', 'waterline').style('stroke', 'lightblue').style('stroke-opacity', 0.5).style('fill', '#').style('stroke-width', 2).style('stroke-dasharray', '10 5 10').attr('x1', margin.left).attr('y1', y(0)).attr('x2', width - margin.right).attr('y2', y(0));\n    }\n\n    mainSVG.append('g').call(xAxis);\n    mainSVG.append('g').call(yAxis);\n    const mainSVGDefs = mainSVG.append('defs');\n    const mainGradient = mainSVGDefs.append('linearGradient').attr('id', 'mainGradient');\n    mainGradient.attr('id', 'gradient').attr('gradientUnits', 'userSpaceOnUse').attr('x1', margin.left).attr('y1', margin.top).attr('x2', width - margin.right).attr('y2', height - margin.bottom).selectAll('stop').data(ticks(0, 1, 10)).join('stop').attr('offset', d => d).attr('stop-color', color.interpolator());\n    mainSVG.append('path').datum(elevationData).attr('fill', 'transparent').attr('stroke', 'url(#gradient)').attr('stroke-width', 3).attr('stroke-linejoin', 'round').attr('stroke-linecap', 'round').attr('d', elevCurve);\n  }, [elevationData]);\n  return React.createElement(SvgLines, {\n    animate: true,\n    duration: 500,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119\n    },\n    __self: this\n  }, React.createElement(\"svg\", {\n    ref: mainRef,\n    viewBox: `0, 0, ${width}, ${height}`,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120\n    },\n    __self: this\n  }));\n};\n\nexport default ChartSVG;","map":{"version":3,"sources":["/Users/phil/Documents/elevation-profile/src/Chart/chartSVGGenerator.js"],"names":["React","useEffect","useRef","extent","ticks","axisLeft","scaleDiverging","scaleLinear","select","selectAll","line","d3line","curveNatural","interpolateRdYlBu","SvgLines","ChartSVG","chartProps","elevationData","width","height","margin","mainRef","remove","mainSVG","current","elevExtent","point","elevation","color","t","domain","x","length","range","left","right","y","nice","bottom","top","xAxis","g","attr","call","yAxis","append","text","elevCurve","curve","defined","d","Number","isNaN","index","style","mainSVGDefs","mainGradient","data","join","interpolator","datum"],"mappings":"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","sourcesContent":["/* eslint-disable no-shadow */\n/* eslint-disable react/prop-types */\nimport React, { useEffect, useRef } from 'react';\n// import * as d3 from 'd3';\nimport { extent, ticks } from 'd3-array';\nimport { axisLeft } from 'd3-axis';\nimport { scaleDiverging, scaleLinear } from 'd3-scale';\nimport { select, selectAll } from 'd3-selection';\nimport { line as d3line, curveNatural } from 'd3-shape';\nimport { interpolateRdYlBu } from 'd3-scale-chromatic';\nimport SvgLines from 'react-mt-svg-lines';\n\nconst ChartSVG = ({ chartProps, elevationData }) => {\n  const { width, height, margin } = chartProps;\n\n  const mainRef = useRef();\n\n  useEffect(() => {\n    selectAll('svg > *').remove();\n    const mainSVG = select(mainRef.current);\n    const elevExtent = extent(elevationData, point => point.elevation);\n    const color = scaleDiverging(t => interpolateRdYlBu(1 - t)).domain(\n      elevExtent,\n    );\n\n    const x = scaleLinear()\n      .domain([0, elevationData.length])\n      .range([margin.left, width - margin.right]);\n\n    const y = scaleLinear()\n      .domain(elevExtent)\n      .nice()\n      .range([height - margin.bottom, margin.top]);\n\n    const xAxis = g =>\n      g\n        .attr('transform', `translate(0,${height - margin.bottom})`)\n        .call(g => g.select('.domain').remove());\n\n    const yAxis = g =>\n      g\n        .attr('transform', `translate(${margin.left},0)`)\n        .call(axisLeft(y))\n        .call(g => g.select('.domain').remove())\n        .call(g =>\n          g\n            .select('.tick:last-of-type text')\n            .append('tspan')\n            .text(' meters'),\n        );\n\n    // const scaleIndex = scaleLinear()\n    //   .domain([0, elevationData.length])\n    //   .range([10, width - 10]);\n\n    // const scaleElev = scaleLinear()\n    //   .domain([maxElev, minElev])\n    //   .range([10, height]);\n\n    const elevCurve = d3line()\n      .curve(curveNatural)\n      .defined(d => !Number.isNaN(d.elevation))\n      .x(d => x(d.index))\n      .y(d => y(d.elevation));\n\n    // console.log({\n    //   zero: y(0),\n    //   elev0: y(elevExtent[0]),\n    //   elev1: y(elevExtent[1]),\n    // });\n    if (y(0) < y(elevExtent[0]) || y(0) > y(elevExtent[1])) {\n      mainSVG\n        .append('line')\n        .attr('id', 'waterline')\n        .style('stroke', 'lightblue')\n        .style('stroke-opacity', 0.5)\n        .style('fill', '#')\n        .style('stroke-width', 2)\n        .style('stroke-dasharray', '10 5 10')\n        .attr('x1', margin.left)\n        .attr('y1', y(0))\n        .attr('x2', width - margin.right)\n        .attr('y2', y(0));\n    }\n\n    mainSVG.append('g').call(xAxis);\n    mainSVG.append('g').call(yAxis);\n\n    const mainSVGDefs = mainSVG.append('defs');\n\n    const mainGradient = mainSVGDefs\n      .append('linearGradient')\n      .attr('id', 'mainGradient');\n\n    mainGradient\n      .attr('id', 'gradient')\n      .attr('gradientUnits', 'userSpaceOnUse')\n      .attr('x1', margin.left)\n      .attr('y1', margin.top)\n      .attr('x2', width - margin.right)\n      .attr('y2', height - margin.bottom)\n      .selectAll('stop')\n      .data(ticks(0, 1, 10))\n      .join('stop')\n      .attr('offset', d => d)\n      .attr('stop-color', color.interpolator());\n\n    mainSVG\n      .append('path')\n      .datum(elevationData)\n      .attr('fill', 'transparent')\n      .attr('stroke', 'url(#gradient)')\n      .attr('stroke-width', 3)\n      .attr('stroke-linejoin', 'round')\n      .attr('stroke-linecap', 'round')\n      .attr('d', elevCurve);\n  }, [elevationData]);\n  return (\n    <SvgLines animate duration={500}>\n      <svg ref={mainRef} viewBox={`0, 0, ${width}, ${height}`} />\n    </SvgLines>\n  );\n};\n\nexport default ChartSVG;\n"]},"metadata":{},"sourceType":"module"}